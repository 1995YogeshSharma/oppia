from __future__ import division
from jinja2.runtime import LoopContext, TemplateReference, Macro, Markup, TemplateRuntimeError, missing, concat, escape, markup_join, unicode_join, to_string, identity, TemplateNotFound, Namespace
name = 'pages/exploration_player/LearnerLocalNav.js'

def root(context, missing=missing):
    resolve = context.resolve_or_missing
    undefined = environment.undefined
    if 0: yield None
    pass
    yield u'// Copyright 2014 The Oppia Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an "AS-IS" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Controller for the local navigation in the learner view.\n */\n\noppia.constant(\n  \'FLAG_EXPLORATION_URL_TEMPLATE\', \'/flagexplorationhandler/<exploration_id>\');\n\noppia.controller(\'LearnerLocalNav\', [\n  \'$scope\', \'$uibModal\', \'$http\', \'ExplorationPlayerService\', \'AlertsService\',\n  \'FocusManagerService\', \'UrlInterpolationService\',\n  \'FLAG_EXPLORATION_URL_TEMPLATE\',\n  function(\n      $scope, $uibModal, $http, ExplorationPlayerService, AlertsService,\n      FocusManagerService, UrlInterpolationService,\n      FLAG_EXPLORATION_URL_TEMPLATE) {\n    $scope.explorationId = ExplorationPlayerService.getExplorationId();\n    $scope.canEdit = GLOBALS.canEdit;\n    $scope.username = GLOBALS.username;\n    $scope.showLearnerSuggestionModal = function() {\n      $uibModal.open({\n        templateUrl: UrlInterpolationService.getDirectiveTemplateUrl(\n          \'/pages/exploration_player/\' +\n          \'learner_view_suggestion_modal_directive.html\'),\n        backdrop: \'static\',\n        resolve: {},\n        controller: [\n          \'$scope\', \'$uibModalInstance\', \'$timeout\', \'PlayerPositionService\',\n          \'ExplorationPlayerService\',\n          function(\n              $scope, $uibModalInstance, $timeout, PlayerPositionService,\n              ExplorationPlayerService) {\n            var stateName = PlayerPositionService.getCurrentStateName();\n            $scope.originalHtml = ExplorationPlayerService.getStateContentHtml(\n              stateName);\n            $scope.description = \'\';\n            $scope.suggestionHtml = $scope.originalHtml;\n            $scope.showEditor = false;\n            // Rte initially displays content unrendered for a split second\n            $timeout(function() {\n              $scope.showEditor = true;\n            }, 500);\n\n            $scope.cancelSuggestion = function() {\n              $uibModalInstance.dismiss(\'cancel\');\n            };\n\n            $scope.submitSuggestion = function() {\n              $uibModalInstance.close({\n                id: ExplorationPlayerService.getExplorationId(),\n                version: ExplorationPlayerService.getExplorationVersion(),\n                stateName: stateName,\n                description: $scope.description,\n                suggestionHtml: $scope.suggestionHtml\n              });\n            };\n          }]\n      }).result.then(function(result) {\n        $http.post(\'/suggestionhandler/\' + result.id, {\n          exploration_version: result.version,\n          state_name: result.stateName,\n          description: result.description,\n          suggestion_html: result.suggestionHtml\n        }).error(function(res) {\n          AlertsService.addWarning(res);\n        });\n        $uibModal.open({\n          templateUrl: UrlInterpolationService.getDirectiveTemplateUrl(\n            \'/pages/exploration_player/\' +\n            \'learner_suggestion_submitted_modal_directive.html\'),\n          backdrop: true,\n          resolve: {},\n          controller: [\n            \'$scope\', \'$uibModalInstance\',\n            function($scope, $uibModalInstance) {\n              $scope.close = function() {\n                $uibModalInstance.dismiss();\n              };\n            }\n          ]\n        });\n      });\n    };\n    $scope.showFlagExplorationModal = function() {\n      $uibModal.open({\n        templateUrl: UrlInterpolationService.getDirectiveTemplateUrl(\n          \'/pages/exploration_player/flag_exploration_modal_directive.html\'),\n        backdrop: true,\n        controller: [\n          \'$scope\', \'$uibModalInstance\', \'PlayerPositionService\',\n          function($scope, $uibModalInstance, PlayerPositionService) {\n            $scope.flagMessageTextareaIsShown = false;\n            var stateName = PlayerPositionService.getCurrentStateName();\n\n            $scope.showFlagMessageTextarea = function(value) {\n              if (value) {\n                $scope.flagMessageTextareaIsShown = true;\n                FocusManagerService.setFocus(\'flagMessageTextarea\');\n              }\n            };\n\n            $scope.submitReport = function() {\n              if ($scope.flagMessage) {\n                $uibModalInstance.close({\n                  report_type: $scope.flag,\n                  report_text: $scope.flagMessage,\n                  state: stateName\n                });\n              }\n            };\n\n            $scope.cancel = function() {\n              $uibModalInstance.dismiss(\'cancel\');\n            };\n          }\n        ]\n      }).result.then(function(result) {\n        var flagExplorationUrl = UrlInterpolationService.interpolateUrl(\n          FLAG_EXPLORATION_URL_TEMPLATE, {\n            exploration_id: $scope.explorationId\n          }\n        );\n        var report = (\n          \'[\' + result.state + \'] (\' + result.report_type + \') \' +\n          result.report_text);\n        $http.post(flagExplorationUrl, {\n          report_text: report\n        }).error(function(error) {\n          AlertsService.addWarning(error);\n        });\n        $uibModal.open({\n          templateUrl: UrlInterpolationService.getDirectiveTemplateUrl(\n            \'/pages/exploration_player/\' +\n            \'exploration_successfully_flagged_modal_directive.html\'),\n          backdrop: true,\n          controller: [\n            \'$scope\', \'$uibModalInstance\',\n            function($scope, $uibModalInstance) {\n              $scope.close = function() {\n                $uibModalInstance.dismiss(\'cancel\');\n              };\n            }\n          ]\n        });\n      });\n    };\n  }\n]);'

blocks = {}
debug_info = ''