from __future__ import division
from jinja2.runtime import LoopContext, TemplateReference, Macro, Markup, TemplateRuntimeError, missing, concat, escape, markup_join, unicode_join, to_string, identity, TemplateNotFound, Namespace
name = 'pages/topics_and_skills_dashboard/TopicsAndSkillsDashboard.js'

def root(context, missing=missing):
    resolve = context.resolve_or_missing
    undefined = environment.undefined
    if 0: yield None
    pass
    yield u'// Copyright 2018 The Oppia Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the "License");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an "AS-IS" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Controllers for the topics and skills dashboard.\n */\noppia.constant(\n  \'EDITABLE_TOPIC_DATA_URL_TEMPLATE\', \'/topic_editor_handler/data/<topic_id>\');\noppia.constant(\n  \'SUBTOPIC_PAGE_EDITOR_DATA_URL_TEMPLATE\',\n  \'/subtopic_page_editor_handler/data/<topic_id>/<subtopic_id>\');\n\noppia.constant(\'EVENT_TYPE_TOPIC_CREATION_ENABLED\', \'topicCreationEnabled\');\noppia.constant(\'EVENT_TYPE_SKILL_CREATION_ENABLED\', \'skillCreationEnabled\');\noppia.constant(\n  \'EVENT_TOPICS_AND_SKILLS_DASHBOARD_REINITIALIZED\',\n  \'topicsAndSkillsDashboardReinitialized\');\n\noppia.controller(\'TopicsAndSkillsDashboard\', [\n  \'$scope\', \'$rootScope\', \'$http\', \'$window\',\n  \'AlertsService\', \'TopicsAndSkillsDashboardBackendApiService\',\n  \'UrlInterpolationService\', \'TopicCreationService\',\n  \'FATAL_ERROR_CODES\', \'EVENT_TYPE_TOPIC_CREATION_ENABLED\',\n  \'EVENT_TYPE_SKILL_CREATION_ENABLED\',\n  \'EVENT_TOPICS_AND_SKILLS_DASHBOARD_REINITIALIZED\',\n  function(\n      $scope, $rootScope, $http, $window,\n      AlertsService, TopicsAndSkillsDashboardBackendApiService,\n      UrlInterpolationService, TopicCreationService,\n      FATAL_ERROR_CODES, EVENT_TYPE_TOPIC_CREATION_ENABLED,\n      EVENT_TYPE_SKILL_CREATION_ENABLED,\n      EVENT_TOPICS_AND_SKILLS_DASHBOARD_REINITIALIZED) {\n    $scope.TAB_NAME_TOPICS = \'topics\';\n    $scope.TAB_NAME_UNTRIAGED_SKILLS = \'untriagedSkills\';\n    $scope.TAB_NAME_UNPUBLISHED_SKILLS = \'unpublishedSkills\';\n\n    var _initDashboard = function() {\n      TopicsAndSkillsDashboardBackendApiService.fetchDashboardData().then(\n        function(response) {\n          $scope.topicSummaries = response.data.topic_summary_dicts;\n          $scope.editableTopicSummaries = $scope.topicSummaries.filter(\n            function(summary) {\n              return summary.can_edit_topic === true;\n            }\n          );\n          $scope.untriagedSkillSummaries =\n            response.data.untriaged_skill_summary_dicts;\n          $scope.unpublishedSkillSummaries =\n            response.data.unpublished_skill_summary_dicts;\n          $scope.activeTab = $scope.TAB_NAME_TOPICS;\n          $scope.userCanCreateTopic = response.data.can_create_topic;\n          $scope.userCanCreateSkill = response.data.can_create_skill;\n          $rootScope.$broadcast(\n            EVENT_TYPE_TOPIC_CREATION_ENABLED, $scope.userCanCreateTopic);\n          $rootScope.$broadcast(\n            EVENT_TYPE_SKILL_CREATION_ENABLED, $scope.userCanCreateSkill);\n          $scope.userCanDeleteTopic = response.data.can_delete_topic;\n          if ($scope.topicSummaries.length === 0 &&\n              $scope.untriagedSkillSummaries.length !== 0) {\n            $scope.activeTab = $scope.TAB_NAME_UNTRIAGED_SKILLS;\n          } else if (\n            $scope.topicSummaries.length === 0 &&\n            $scope.unpublishedSkillSummaries.length !== 0) {\n            $scope.activeTab = $scope.TAB_NAME_UNPUBLISHED_SKILLS;\n          }\n        },\n        function(errorResponse) {\n          if (FATAL_ERROR_CODES.indexOf(errorResponse.status) !== -1) {\n            AlertsService.addWarning(\'Failed to get dashboard data\');\n          } else {\n            AlertsService.addWarning(\'Unexpected error code from the server.\');\n          }\n        }\n      );\n    };\n\n    $scope.setActiveTab = function(tabName) {\n      $scope.activeTab = tabName;\n    };\n    $scope.createTopic = function() {\n      TopicCreationService.createNewTopic();\n    };\n\n    _initDashboard();\n    $scope.$on(EVENT_TOPICS_AND_SKILLS_DASHBOARD_REINITIALIZED, _initDashboard);\n  }\n]);'

blocks = {}
debug_info = ''